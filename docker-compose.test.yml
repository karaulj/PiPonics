version: "3"

services:
  init-test:
    build:
      context: ./init
      dockerfile: Dockerfile-test
    volumes:
      - ./init/${CONFIG_HELPER_PYTHON_FILE}:/home/${CONFIG_HELPER_PYTHON_FILE}
      - ./test/data:/data
      - ./test/config_helper_test.py:/home/config_helper_test.py

  db-init-test:
    build:
      context: ./init/db
      dockerfile: Dockerfile-test
    volumes:
      - ./init/${CONFIG_HELPER_PYTHON_FILE}:/home/${CONFIG_HELPER_PYTHON_FILE}
      - ./test/data:/data
      - ./test/db_setup_test.py:/home/db_setup_test.py
    depends_on:
      - db-init

  config-init-test:
    build:
      context: ./init/config
      dockerfile: Dockerfile-test
    volumes:
      - ./init/${CONFIG_HELPER_PYTHON_FILE}:/home/${CONFIG_HELPER_PYTHON_FILE}
      - ./test/data:/data
      - ./test/description_gen_test.py:/home/description_gen_test.py
    depends_on:
      - config-init


  #
  # backend:
  #   build: './backend-server-flask'
  #   depends_on:
  #     - "db"
  #   ports:
  #     - "5000:${API_PORT}"
  #
  # frontend:
  #   build: './frontend-server-angular'
  #   depends_on:
  #     - "backend"
  #   ports:
  #     - "4200:${USER_PORT}"
